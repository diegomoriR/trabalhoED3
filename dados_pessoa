#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "header_pessoa.h"
#include "header_indice.h"


//funcionalidade 1 (CREATE INDEX)
    FILE *fd = fopen("arquivoIndicePrimario.bin", "wb"); //abrindo o arquivo para a escrita binaria
    VERIFICAR_ARQUIVO(fd); // verificando se o arquivo foi aberto corretamente
    headerI h;
    h.status = '0'; // status inconsistente
    fwrite(&h.status, sizeof(char), 1, fd);
    for(int i = 0; i < TAMANHO_INDICE - 1, i++){
        fputc('$', fd);
    }
    h.status = '1'; //status consistente
    INICIO_ARQUIVO(fd) // cursor do arquivo para o inicio
    fwrite(&h.status, sizeof(char), 1, fd);
    fclose(fd); //fechando arquivo

//funcionalidade 2 (CREATE TABLE)
    FILE *fdin = fopen("arquivoEntrada.csv", "r"); // abrindo o arquivo para ler os dados
    VERIFICAR_ARQUIVO(fdin);
    FILE *fdout = fopen("arquivoSaida.bin", "wb"); // abrindo o arquivo para a escrita binaria no arquivo de dados
    VERIFICAR_ARQUIVO(fdout);
    FILE *fdh = fopen("arquivoIndicePrimario.bin", "wb"); // abrindo o arquivo para a escrita binaria no indice
    VERIFICAR_ARQUIVO(fdh)

    //criar cabecalho do arquivo de dados pessoa
    header hp;
    hp.status = '0' //status incosistente
    fwrite(&hp.status, sizeof(char), 1, fdout);
    hp.quantidadePessoas = 0;
    hp.quantidadeRemovidos = 0;  //iniciando o cabecalho
    hp.Offset = 0;
    fwrite(hp.quantidadePessoas, sizeof(int), 1, fdout);
    fwrite(hp.quantidadeRemovidos, sizeof(int), 1, fdout);
    fwrite(hp.Offset, sizeof(long), 1, fdout);
    hp.status = '1' //status consistente
    INICIO_ARQUIVO(fdout) // cursor do arquivo para o inicio
    fwrite(&hp.status, sizeof(char), 1, fdout);

    //Ler os dados do arquivo csv
    pessoa p; 
    char linha[TAMANHO_LINHA]; // linha para ler os dados
    fgets(linha, TAMANHO_LINHA, fdin);//pula linha do arquivo csv

    while(fgets(linha, TAMANHO_LINHA, fdin) != EOF){ // ler as linhas ate o final do arquivo csv
    //id Pessoa
        p.idPessoa =
    //nome Pessoa

    //idade Pessoa

    //nome Usuario
    }
